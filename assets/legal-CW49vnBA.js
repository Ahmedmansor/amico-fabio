import"./global-header-B4AxPn_2.js";import"./global-footer-D0aab2x-.js";import"./main-DTrlTtC4.js";(function(){function o(s,c,n){const i=document.createElement(s);return c&&(i.className=c),n&&(i.textContent=n),i}function x(s){return s==="en"?window.i18nEn||{}:window.i18nIt||{}}function L(s){const c=document.getElementById("legal-content"),n=document.getElementById("legal-toc"),i=document.getElementById("legal-toc-top"),a=document.querySelector("#indexMenu .index-menu-nav");if(!c||!n)return;const b=s||localStorage.getItem("fabio_lang")||document.documentElement.lang||"it",h=x(b).legal_page||{};n.innerHTML="",i&&(i.innerHTML=""),a&&(a.innerHTML="");const A=Array.isArray(h.toc)?h.toc:[],k=Array.isArray(h.summary_items)?h.summary_items:A;A.forEach(e=>{const t=o("a","legal-link",e.label||"");if(t.href="#"+e.id,n.appendChild(t),a){const r=o("a","index-link",e.label||"");r.href="#"+e.id,a.appendChild(r)}}),i&&k.forEach(e=>{const t=o("a","legal-link",e.label||"");t.href="#"+e.id,i.appendChild(t)}),c.innerHTML="";const C=Array.isArray(h.sections)?h.sections:[];C.forEach(e=>{const t=o("div","legal-section");t.id=e.id;const r=o("div","heading-row"),f=window.ImagePaths&&window.ImagePaths.icons&&window.ImagePaths.icons.legal&&window.ImagePaths.icons.legal[e.id]?window.ImagePaths.icons.legal[e.id]:window.ImagePaths&&window.ImagePaths.icons&&window.ImagePaths.icons.legal?window.ImagePaths.icons.legal.default:"";if(f){const l=o("img","heading-icon");l.src=f,l.alt=e.heading||"",r.appendChild(l)}const v=o("h3","legal-subtitle text-xl",e.heading||"");r.appendChild(v),t.appendChild(r);const I=Array.isArray(e.paragraphs)?e.paragraphs:[];let m=null;if(I.forEach(l=>{if(typeof l=="string"&&l.trim().startsWith("•")){m||(m=o("ul","gold-list"),t.appendChild(m));const u=o("li","",l.replace(/^•\s*/,""));m.appendChild(u)}else{m=null;const u=o("p","text-sm leading-relaxed text-gray-300 mb-3",l);t.appendChild(u)}}),e.id==="data_types"){const l=[];for(let g=0;g<I.length;g++){const p=String(I[g]||"").match(/:\s*([^\.]+)\.?/);if(p&&p[1]){p[1].split(",").forEach(P=>{let y=P.trim();y=y.replace(/^(and|e)\s+/i,"").trim(),y&&l.push(y)});break}}if(l.length){const g=o("div","chip-list");l.forEach(u=>{const p=o("span","chip",u);g.appendChild(p)}),t.insertBefore(g,t.querySelector("p"))}}c.appendChild(t)});function S(e){const t=document.querySelector(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})}function w(e){e&&e.querySelectorAll("a").forEach(t=>{t.addEventListener("click",r=>{r.preventDefault(),S(r.currentTarget.getAttribute("href"));const f=document.getElementById("indexMenu");f&&f.classList.remove("is-visible")})})}w(n),w(i),w(a);const d={};n.querySelectorAll("a").forEach(e=>{d[e.getAttribute("href")]=[e]}),i&&i.querySelectorAll("a").forEach(e=>{const t=e.getAttribute("href");d[t]?d[t].push(e):d[t]=[e]}),a&&a.querySelectorAll("a").forEach(e=>{const t=e.getAttribute("href");d[t]?d[t].push(e):d[t]=[e]});function B(e){Object.values(d).forEach(f=>f.forEach(v=>v.classList.remove("active")));const t="#"+e;(d[t]||[]).forEach(f=>f.classList.add("active"))}const M=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&B(t.target.id)})},{rootMargin:"0px 0px -60% 0px",threshold:.25});C.forEach(e=>{const t=document.getElementById(e.id);t&&M.observe(t)})}window.renderLegal=L,document.addEventListener("DOMContentLoaded",function(){const s=localStorage.getItem("fabio_lang")||"it";L(s),typeof applyTranslations=="function"&&applyTranslations(s);const c=document.getElementById("legal-fab"),n=document.getElementById("indexMenu"),i=n?n.querySelector(".index-menu-close"):null;if(c&&n){const a=x(s),b=document.querySelector(".gh-fab-label"),E=a&&a.fab&&typeof a.fab.indice=="string"?a.fab.indice:s==="en"?"Index":"Indice";c.setAttribute("aria-label",E),b&&(b.textContent=E),c.addEventListener("click",()=>{n.classList.add("is-visible")})}i&&n&&i.addEventListener("click",()=>{n.classList.remove("is-visible")}),n&&n.addEventListener("click",a=>{a.target===n&&n.classList.remove("is-visible")})})})();
